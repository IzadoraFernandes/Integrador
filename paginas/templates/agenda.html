{% extends 'modelo.html' %}

{% load static %}

 {%block titulo %}
 <title>Index</title>
 {%endblock%}

{% block css %}
<link rel="stylesheet" href="{% static 'css/agenda.css' %}">
{% endblock %}

{% if request.user.is_authenticated %}



{% block conteudo %}
<body>
    <section class="content">
     <div id='calendar'></div>

    <div class="modal fade" id="cadastrar" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
         data-backdrop="static">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title text-center">Cadastrar Evento</h4>
                </div>
                <div class="modal-body">
                    <form role="form" action="" method="post">
                        {% csrf_token %}
                          <div class="form-group">
                              {{form.nome}}
                          </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
    

</body>
{%endblock%}

{%else%}
        <h1> Você não está autenticado!</h1> 
        <h4>Por favor faça login ou cadastre-se para ter acesso.</h4>
                
        <a href="{% url 'login' %}"> Login</a>
        <a href="{% url 'register' %}"> Cadastro</a>
{% endif %}
<script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>
<script src="{% static 'js/popper.min.js' %}"></script>

<script>

$(document).ready(function () {

    $('#calendar').fullCalendar({
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
        },
        navLinks: true, // can click day/week names to navigate views
        editable: true,
        eventLimit: true, // allow "more" link when too many events
        selectable: true,
        selectHelper: true,
        select: function (start, end) {
            $('#cadastrar #start').val(moment(start).format('DD/MM/YYYY HH:mm:ss'));
            $('#cadastrar #end').val(moment(end).format('DD/MM/YYYY HH:mm:ss'));
            $('#cadastrar').modal('show');
        },
    });

});

</script>    
</html>